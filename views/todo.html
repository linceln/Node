<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="description" content="learn javascript by www.liaoxuefeng.com">
    <title>{{ title }}</title>
    <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
    <link rel="stylesheet" href="/static/css/bootstrap.css">
    <script src="/static/js/bootstrap.js"></script>
    <script src="https://unpkg.com/vue@2.0.1/dist/vue.js"></script>
    <script src="https://cdn.jsdelivr.net/vue.resource/1.0.3/vue-resource.min.js"></script>
    <script>
        $(() => {
            var vm = new Vue({
                el: '#vm',
                data: {
                    title: '',
                    todoList: []
                },
                created: () => {
                    // this.init();
                    var that = this;
                    console.log('init...');
                    that.$resource('/api/v1/todos')
                        .get()
                        .then((response) => {
                            response.json()
                                .then((result) => {
                                    that.title = result.title;
                                    that.todoList = result.todoList;
                                }, (response) => {
                                    alert('请求失败');
                                })
                        });
                },
                methods: {
                    init: function () {
                        var that = this;
                        console.log('init...');
                        that.$resource('/api/v1/todos')
                            .get()
                            .then((response) => {
                                response.json()
                                    .then((result) => {
                                        that.title = result.title;
                                        that.todoList = result.todoList;
                                    }, (response) => {
                                        alert('请求失败');
                                    })
                            })
                    }
                }
            })
        })
    </script>
</head>

<body>
    <div id="vm">
        <h3 v-text="title"></h3>
        <ol>
            <li v-for="t in todoList">
                <dl>
                    <dt>{{t.name}}</dt>
                </dl>
            </li>
        </ol>
    </div>
</body>

<footer>

</footer>

</html>